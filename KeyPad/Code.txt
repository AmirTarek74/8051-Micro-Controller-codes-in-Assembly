RS 	EQU P0.0
E  	EQU P0.1
LCD EQU P2	
	
ORG 00H
	;LCD CONFIGURATIONS
	
	MOV A,#38H ; MATRIX
	ACALL COMMAND
	
	
	MOV A,#1H 	; CLEAR LCD
	ACALL COMMAND
	
	
	MOV A,#0EH ; DISPALY ON CURSOR BLINK
	ACALL COMMAND
	
	
	MOV A,#80H ;FORCE CURSOR TO BEGIN AT FIRST LINE
	ACALL COMMAND
	
	MOV DPTR,#300H
	AGAIN: CLR A
	MOVC A,@A+DPTR
	JZ DONE2
	INC DPTR
	ACALL DISPLAY
	ACALL DELAY
	ACALL DELAY
	SJMP AGAIN
	DONE2:ACALL DELAY
	

	MOV A,#0C0H ;FORCE CURSOR TO BEGIN AT SECOND LINE
	ACALL COMMAND
	
KEYPAD:

	 MOV P1,#0FFh  ; PORT 1 INPUT
     CLR P1.0 
     JB P1.4,EIGHT  
     MOV A,#37H 
     ACALL DISPLAY  
EIGHT:
	  JB P1.5,NINE 
      MOV A,#38H
      ACALL DISPLAY
NINE:	
	  JB P1.6,DIVISION
      MOV A,#39H
      ACALL DISPLAY
DIVISION:
	  JB P1.7,FOUR
      MOV A,#2FH
      ACALL DISPLAY
FOUR: 
	  SETB P1.0
      CLR P1.1
      JB P1.4,FIVE
      MOV A,#34H
      ACALL DISPLAY
FIVE:
	  JB P1.5,SIX
      MOV A,#35H
      ACALL DISPLAY
SIX:
	  JB P1.6,MULTPLICATION
      MOV A,#36H
      ACALL DISPLAY
MULTPLICATION:
	  JB P1.7,ONE
      MOV A,#2AH
      ACALL DISPLAY
ONE:  
	  SETB P1.1
      CLR P1.2
      JB P1.4,TWO
      MOV A,#31H
      ACALL DISPLAY
TWO:
	  JB P1.5,THREE
      MOV A,#32H
      ACALL DISPLAY
THREE:
	   JB P1.6,MUNIS
       MOV A,#33H
       ACALL DISPLAY
MUNIS:
	   JB P1.7,ON
       MOV A,#2DH
       ACALL DISPLAY
ON:	   
	   SETB P1.2
       CLR P1.3
       JB P1.4,ZERO
	   CLR RS 	;COMMAND
       MOV LCD,#01H
	   SETB E
	   CLR E 
ZERO:
	   JB P1.5,EQUAL
       MOV A,#30H
       ACALL DISPLAY
EQUAL:
	   JB P1.6,PLUS
       MOV A,#3DH
       ACALL DISPLAY
PLUS:
	   JB P1.7,DONE
       MOV A,#2BH
       ACALL DISPLAY
       DONE: LJMP KEYPAD

COMMAND:
		ACALL DELAY
		CLR RS
		MOV LCD,A
		SETB E
		CLR  E
		RET
	
DISPLAY:
		ACALL DELAY
		SETB RS ; RS VALUE 1 FOR VALUE
		MOV LCD,A
		SETB E ; ENABLE 
		CLR E ; ENABLE
		HERE1:JNB P1.4,HERE1	;FOR HOLDING  THE BUTTON
		HERE2:JNB P1.5,HERE2	;FOR HOLDING  THE BUTTON
		HERE3:JNB P1.6,HERE3	;FOR HOLDING  THE BUTTON
		HERE4:JNB P1.7,HERE4	;FOR HOLDING  THE BUTTON
		CLR RS
		RET
	
DELAY:
		MOV R0,#100
		H1:MOV R1,#100
		H2:DJNZ R1,H2
		DJNZ R0,H1
		RET

	
ORG 300H
	WELCOME: DB "HELLO THERE",0	
END
